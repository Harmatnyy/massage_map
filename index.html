<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <title>Massage Map (Google Style, 2/3 + 1/3 layout)</title>

  <!-- –ê–¥–∞–ø—Ç–∏–≤–Ω—ñ—Å—Ç—å -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Bootstrap CSS -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css"
  />
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap-theme.min.css"
  />

  <!-- Font Awesome -->
  <link
    rel="stylesheet"
    href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css"
  />

  <!-- Leaflet CSS -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css"
  />

  <!-- MarkerCluster CSS (–¥–ª—è –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è –º–∞—Ä–∫–µ—Ä—ñ–≤) -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css"
  />
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css"
  />

  <!-- AwesomeMarkers (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω—ñ —ñ–∫–æ–Ω–∫–∏) -->
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css"
  />

  <style>
    /* –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ –∑–∞–≥–∞–ª—å–Ω–∏–π —Ä–æ–∑–º—ñ—Ä —Å—Ç–æ—Ä—ñ–Ω–∫–∏ */
    html,
    body {
      width: 100%;
      height: 100%;
      margin: 0;
      padding: 0;
    }

    /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –º–∞–ø–∏ (2/3 —à–∏—Ä–∏–Ω–∏) */
    #map {
      float: left;
      width: 66.6667%;
      height: 100vh; /* –ó–∞–π–º–∞—î –≤—Å—é –≤–∏—Å–æ—Ç—É –≤—ñ–∫–Ω–∞ */
    }

    /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å–ø–∏—Å–∫—É (1/3 —à–∏—Ä–∏–Ω–∏) */
    #contact-list {
      float: right;
      width: 33.3333%;
      height: 100vh;
      overflow-y: auto; /* –ü—Ä–æ–∫—Ä—É—Ç–∫–∞, —è–∫—â–æ —Å–ø–∏—Å–æ–∫ –∑–∞–≤–µ–ª–∏–∫–∏–π */
      padding: 10px;
      box-sizing: border-box;
      background-color: #f8f8f8;
    }

    /* –û—Ñ–æ—Ä–º–ª–µ–Ω–Ω—è –∫–Ω–æ–ø–æ–∫ (–±—ñ–ª–∏–π —Ç–µ–∫—Å—Ç) */
    .btn-primary,
    .btn-success {
      color: #fff !important; /* –ü—Ä–∏–º—É—Å–æ–≤–æ –±—ñ–ª–∏–π —Ç–µ–∫—Å—Ç */
    }
  </style>
</head>
<body>

  <!-- –ö–∞—Ä—Ç–∞ –∑–ª—ñ–≤–∞ (2/3) -->
  <div id="map"></div>

  <!-- –°–ø–∏—Å–æ–∫ –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤ —Å–ø—Ä–∞–≤–∞ (1/3) -->
  <div id="contact-list">
    <h3>–°–ø–∏—Å–æ–∫ –º–∞—Å–∞–∂–∏—Å—Ç—ñ–≤</h3>
    <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
      <!-- –¢—É—Ç –¥–∏–Ω–∞–º—ñ—á–Ω–æ –≤—Å—Ç–∞–≤–∏–º–æ –∞–∫–æ—Ä–¥–µ–æ–Ω –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –∫–æ–Ω—Ç–∞–∫—Ç—É (—á–µ—Ä–µ–∑ JS) -->
    </div>
  </div>

  <!-- JS –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ -->
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.3/dist/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js"></script>

  <script>
    // –î–∞–Ω—ñ –ø—Ä–æ –º–∞—Å–∞–∂–∏—Å—Ç—ñ–≤/—Ü–µ–Ω—Ç—Ä–∏
    var places = [
      {
        name: "–ñ–µ–Ω—è –º–∞—Å—Å–∞–∂–∏—Å—Ç",
        lat: 50.425,
        lon: 30.520,
        address: "–ü–∞–ª–∞—Ü –£–∫—Ä–∞—ó–Ω–∞",
        price: "800-1000 –≥—Ä–Ω –∑–∞ 2-3 –≥–æ–¥–∏–Ω–∏",
        desc: "–ë–∞–Ω–∫–∏, —Å—Ç–∏–º—É–ª—è—Ü—ñ—ó, —Ä–æ–∑—Å–ª–∞–±–ª—è—é—á–∏–π, —Å–ø–æ—Ä—Ç–∏–≤–Ω–∏–π, –ª—ñ–∫—É—é—á–∏–π.",
        contact_type: "phone",
        contact_value: "0504400094"
      },
      {
        name: "–ú–∞—Å–∞–∂ –º. –ê—Ä—Å–µ–Ω–∞–ª—å–Ω–∞",
        lat: 50.4406,
        lon: 30.5472,
        address: "–ê—Ä—Å–µ–Ω–∞–ª—å–Ω–∞ –∞–±–æ –°–º–∞—Ä—Ç–ú–µ–¥—ñ–∫–∞–ª –Ω–∞ –ú–∞–∫–∫–µ–π–Ω–∞",
        price: "",
        desc: "–û—Å—Ç–µ–æ–ø–∞—Ç–∏—á–Ω–∏–π –º–∞—Å–∞–∂ (–í—ñ—Ç—Ä—É–∫)",
        contact_type: "phone",
        contact_value: "+380936226390"
      },
      {
        name: "ELITE MASSAGE",
        lat: 50.5123,
        lon: 30.4989,
        address: "–¢–†–¶ DREAM 1 yellow, –û–±–æ–ª–æ–Ω—Å—å–∫–∏–π –ø—Ä–æ—Å–ø–µ–∫—Ç, 1–ë, 3 –ø–æ–≤–µ—Ä—Ö",
        price: "",
        desc: "",
        contact_type: "link",
        contact_value: "https://www.instagram.com/alexandr__morgun"
      },
      {
        name: "–Æ—Ä—ñ–π",
        lat: 50.4144,
        lon: 30.5360,
        address: "Profesora Pidvysots'koho St, 6–í",
        price: "",
        desc: "",
        contact_type: "phone",
        contact_value: "0931349757"
      },
      {
        name: "–í–ª–∞–¥–∏—Å–ª–∞–≤ –†–µ–∞–±—ñ–ª—ñ—Ç–æ–ª–æ–≥",
        lat: 50.4506,
        lon: 30.4640,
        address: "–ö–ü–Ü",
        price: "",
        desc: "",
        contact_type: "phone",
        contact_value: "380997584948"
      },
      {
        name: "Iryna Lysenko",
        lat: 50.4448,
        lon: 30.5106,
        address: "–±—É–ª. –¢–∞—Ä–∞—Å–∞ –®–µ–≤—á–µ–Ω–∫–∞ 46–∞",
        price: "",
        desc: "",
        contact_type: "link",
        contact_value: "https://www.instagram.com/massageirynalysenko"
      },
      {
        name: "–û—Å—Ç–µ–æ–ø–∞—Ç—ñ—è —Ç–∞ –ü—ñ–ª–∞—Ç–µ—Å",
        lat: 50.4505,
        lon: 30.5048,
        address: "–í—É–ª. –û.–ì–æ–Ω—á–∞—Ä–∞ 26, –ö–∏—ó–≤",
        price: "–ì—Ä–∞—Ñ—ñ–∫: 10:00 - 21:00",
        desc: "",
        contact_type: "link",
        contact_value: "https://w.wlaunch.net/i/tronka.gonchara/b/fd01fdf0-b209-11ee-9635-a72d342f2634/s"
      },
      {
        name: "–ú–ê–°–ê–ñ –ö–ò–á–í - –ü–∞–ª–∞—Ü —Å–ø–æ—Ä—Ç—É",
        lat: 50.4376,
        lon: 30.5204,
        address: "–≤—É–ª–∏—Ü—è –®–æ—Ç–∞ –†—É—Å—Ç–∞–≤–µ–ª—ñ, 33–ê",
        price: "",
        desc: "",
        contact_type: "phone",
        contact_value: "0737857575"
      },
      {
        name: "PhysioKey",
        lat: 50.4468,
        lon: 30.5070,
        address: "Bohdana Khmel'nyts'koho St, 59, Kyiv, Ukraine 02000",
        price: "",
        desc: "",
        contact_type: "link",
        contact_value: "https://n818324.alteg.io/company/768564/personal/menu?o="
      }
    ];

    // –°—Ç–≤–æ—Ä—é—î–º–æ –∫–∞—Ä—Ç—É —É "Google Maps" —Å—Ç–∏–ª—ñ (–Ω–µ–æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç!)
    // –Ø–∫—â–æ —Ü–µ–π —à–∞—Ä –Ω–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏–º–µ –∞–±–æ –ø–æ—Ä—É—à—É—î TOS, –∫—Ä–∞—â–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ OSM:
    // L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {...})
    var map = L.map('map', {
      center: [50.4501, 30.5234],
      zoom: 12
    });

    // –ù–ï–û–§–Ü–¶–Ü–ô–ù–ò–ô Google Tiles (–º–æ–∂—É—Ç—å –Ω–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∞–±–æ –ø–æ—Ä—É—à—É–≤–∞—Ç–∏ TOS!)
    var googleLayer = L.tileLayer('http://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}', {
      maxZoom: 20,
      subdomains:['mt0','mt1','mt2','mt3']
    }).addTo(map);

    // –ö–ª–∞—Å—Ç–µ—Ä –º–∞—Ä–∫–µ—Ä—ñ–≤
    var markerCluster = L.markerClusterGroup();

    // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è —Ñ–æ—Ä–º—É–≤–∞–Ω–Ω—è HTML-–∫–Ω–æ–ø–∫–∏
    function buildContactButton(type, value) {
      if (type === "phone") {
        return "<a href='tel:" + value + "' class='btn btn-primary' target='_blank'>–ó–∞—Ç–µ–ª–µ—Ñ–æ–Ω—É–≤–∞—Ç–∏</a>";
      } else if (type === "link") {
        return "<a href='" + value + "' class='btn btn-success' target='_blank'>–ó–∞–ø–∏—Å–∞—Ç–∏—Å—è</a>";
      }
      return "";
    }

    // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è popup (–ø—Ä–∏ –∫–ª—ñ–∫—É –Ω–∞ –º–∞—Ä–∫–µ—Ä)
    function buildPopup(place) {
      var button = buildContactButton(place.contact_type, place.contact_value);
      var html = "<b>" + place.name + "</b><br>" +
                 "üìç " + place.address + "<br>" +
                 (place.price ? place.price + "<br>" : "") +
                 (place.desc ? place.desc + "<br>" : "") +
                 button;
      return html;
    }

    // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è tooltip (–ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–Ω—ñ)
    function buildTooltip(place) {
      if (place.contact_type === "phone") {
        return "<div style='width: 300px; white-space: normal; text-align: center; font-weight: bold;'>" +
                 place.name + "<br>" + place.contact_value + "<br><br>" +
                 "<a href='tel:" + place.contact_value + "' class='btn btn-primary' style='color:white' target='_blank'>–ó–∞—Ç–µ–ª–µ—Ñ–æ–Ω—É–≤–∞—Ç–∏</a>" +
               "</div>";
      } else if (place.contact_type === "link") {
        return "<div style='width: 300px; white-space: normal; text-align: center; font-weight: bold;'>" +
                 place.name + "<br><br>" +
                 "<a href='" + place.contact_value + "' class='btn btn-success' style='color:white' target='_blank'>–ó–∞–ø–∏—Å–∞—Ç–∏—Å—è</a>" +
               "</div>";
      } else {
        return "<b>" + place.name + "</b>";
      }
    }

    // –î–æ–¥–∞—î–º–æ –∫–æ–∂–µ–Ω –º–∞—Ä–∫–µ—Ä
    for (var i = 0; i < places.length; i++) {
      var p = places[i];
      var popupHtml = buildPopup(p);
      var tooltipHtml = buildTooltip(p);

      // –°—Ç–≤–æ—Ä—é—î–º–æ –º–∞—Ä–∫–µ—Ä
      var marker = L.marker([p.lat, p.lon], {
        icon: L.AwesomeMarkers.icon({
          icon: 'info-sign',
          markerColor: 'gray',
          prefix: 'glyphicon',
          iconColor: 'white'
        })
      });

      // –ü—Ä–∏–≤'—è–∑—É—î–º–æ popup —Ç–∞ tooltip
      marker.bindPopup(popupHtml, {maxWidth: 300});
      marker.bindTooltip(tooltipHtml);

      // –î–æ–¥–∞—î–º–æ –≤ –∫–ª–∞—Å—Ç–µ—Ä
      markerCluster.addLayer(marker);
    }

    // –î–æ–¥–∞—î–º–æ –∫–ª–∞—Å—Ç–µ—Ä –Ω–∞ –º–∞–ø—É
    map.addLayer(markerCluster);

    // ************ –§–æ—Ä–º—É—î–º–æ –∞–∫–æ—Ä–¥–µ–æ–Ω —É –ø—Ä–∞–≤—ñ–π –∫–æ–ª–æ–Ω—Ü—ñ ************
    var accordionContainer = document.getElementById("accordion");

    places.forEach(function(place, index) {
      var collapseId = "collapse" + index;
      var headingId = "heading" + index;

      // –ö–Ω–æ–ø–∫–∞ –∞–∫–æ—Ä–¥–µ–æ–Ω—É
      var panel = document.createElement("div");
      panel.className = "panel panel-default";

      var panelHeading = document.createElement("div");
      panelHeading.className = "panel-heading";
      panelHeading.setAttribute("role", "tab");
      panelHeading.id = headingId;

      var h4 = document.createElement("h4");
      h4.className = "panel-title";

      var aTag = document.createElement("a");
      aTag.setAttribute("role", "button");
      aTag.setAttribute("data-toggle", "collapse");
      aTag.setAttribute("data-parent", "#accordion");
      aTag.setAttribute("href", "#" + collapseId);
      aTag.setAttribute("aria-expanded", "true");
      aTag.setAttribute("aria-controls", collapseId);
      aTag.innerHTML = place.name;

      h4.appendChild(aTag);
      panelHeading.appendChild(h4);

      // –í–º—ñ—Å—Ç –∞–∫–æ—Ä–¥–µ–æ–Ω—É
      var collapseDiv = document.createElement("div");
      collapseDiv.id = collapseId;
      collapseDiv.className = "panel-collapse collapse";
      collapseDiv.setAttribute("role", "tabpanel");
      collapseDiv.setAttribute("aria-labelledby", headingId);

      var panelBody = document.createElement("div");
      panelBody.className = "panel-body";

      // –¢–µ–∫—Å—Ç —É—Å–µ—Ä–µ–¥–∏–Ω—ñ –∞–∫–æ—Ä–¥–µ–æ–Ω—É
      var contactBtn = buildContactButton(place.contact_type, place.contact_value);
      var bodyHtml = "<p><b>–ê–¥—Ä–µ—Å–∞:</b> " + place.address + "</p>" +
                     (place.price ? "<p><b>–¶—ñ–Ω–∞/–ì—Ä–∞—Ñ—ñ–∫:</b> " + place.price + "</p>" : "") +
                     (place.desc ? "<p><b>–û–ø–∏—Å:</b> " + place.desc + "</p>" : "") +
                     contactBtn;

      panelBody.innerHTML = bodyHtml;
      collapseDiv.appendChild(panelBody);

      // –°–∫–ª–∞–¥–∞—î–º–æ –ø–∞–Ω–µ–ª—å
      panel.appendChild(panelHeading);
      panel.appendChild(collapseDiv);

      // –î–æ–¥–∞—î–º–æ –≤ –∞–∫–æ—Ä–¥–µ–æ–Ω
      accordionContainer.appendChild(panel);
    });
  </script>

</body>
</html>
